actor FragGrenadeExplosion
{
    +NOBLOCKMAP
    +MISSILE
    Damagetype Explosive
    States
    {
    Spawn:
        TNT1 A 0 NoDelay
        {
            A_NoBlocking;
            A_Explode(200, 400, 0);
            A_Explode(200, 200, 0);
            A_SpawnItem("BigRicochet", 0, -15);
            A_SpawnItemEx("DetectFloorCrater", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION);
            A_SpawnItemEx("DetectCeilCrater",  0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION);
            A_SpawnItemEx("ExplosionFlare",    0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION);
            A_SpawnItemEx("BarrelExplosionDamage", 0, 0, 30, 0, 0, 0, 0, SXF_NOCHECKPOSITION);
            A_SpawnItemEx("BarrelKaboom", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION);
        }
        TNT1 AAAAAAA 0 A_SpawnProjectile("ExplosionFlames", 0, 0, random(0, 360), CMF_AIMDIRECTION, random(0, 360))
        TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnProjectile("ExplosionParticleHeavy", 0, 0, random(0, 360), CMF_AIMDIRECTION, random(0, -180))
        TNT1 AAAAAA 0 A_SpawnProjectile("ExplosionParticleHeavy", 0, 0, random(0, 360), CMF_AIMDIRECTION, random(0, -180))
        TNT1 A 0 A_Quake(2, 24, 0, 960)
        TNT1 A 0 A_PlaySound("explosions/explode", CHAN_AUTO)
        TNT1 A 0 A_PlaySound("explosions/far", CHAN_AUTO)
        TNT1 A 0 A_AlertMonsters
        TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnProjectile("ShrapnelParticle", 0, 0, random(0, 360), CMF_AIMDIRECTION, random(-5, -90))
        TNT1 A 0 A_PlaySound("explosions/far", CHAN_ITEM)
        TNT1 A 0 A_SpawnItem("SmokeColumn")
        TNT1 AAAAAAAAAAAAAAA 8 A_SpawnProjectile("ExplosionSmoke", 1, 0, random(0, 360), CMF_AIMDIRECTION, random(-50, -130))
        stop
    }
}

/** Flag given to the player to make them recoil when a kick has connected. */
actor KickHasHit : Inventory
{
    Inventory.MaxAmount 1
}

/** Used to get the player to animate different melee attacks in a combo formation */
actor PSeq1 : Inventory
{
    Inventory.MaxAmount 2
}

/** Used to get the player to animate different melee attacks in a combo formation */
actor PSeq2 : Inventory
{
    Inventory.MaxAmount 1
}

actor KickAttack: FastProjectile
{
    Radius 10
    Height 6
    DamageType Kick
    Damage (random(38, 42))
    Speed 30
    
    Projectile 
    +NOEXTREMEDEATH
  renderstyle Translucent
  alpha 0.5
  Scale 1.5
    States
    {
    Spawn:
        TNT1 A 2
        stop
        
    Death:
        TNT1 A 0 A_PlaySound("weapons/melee/heavy", CHAN_ITEM)
        TNT1 A 0 A_GiveToTarget("KickHasHit", 1)
        TNT1 A 0 A_Quake(2, 6, 0, 320)
		MPUF A 3
		MPUF BCD 3
        stop
    }
}

actor MeleeStrike1: KickAttack
{
    DamageType Kick
    Damage (random(10, 15))
    Speed 30

    States
    {
    Spawn:
        TNT1 A 1
        stop

    Death:
        TNT1 A 10 A_PlaySound("weapons/melee/heavy")
        stop
    }
}

actor MeleeStrike2: MeleeStrike1
{
    Damage (random(24, 32))
    Speed 40
}

actor MeleeStrike1Smash: MeleeStrike1
{
    Damage (random(24, 32))
    DamageType SuperKick
}